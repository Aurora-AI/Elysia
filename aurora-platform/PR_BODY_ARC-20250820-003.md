# ARC-20250820-003 — Decision Flow (Memória→HRM) • Integração via Router

## Resumo
Adiciona a capability `decision.evaluate_case` que:
1) busca contexto na Memória (Qdrant),
2) deriva *facts* dos metadados,
3) avalia o HRM e retorna decisão + justificativa.

## Mudanças
- `src/orchestration/decision_flow.py` (novo): fetch→facts→HRM.
- `src/router/capabilities_registry.yaml`: adiciona `decision.evaluate_case`.
- `.env.example`: `DECISION_TOPK=5`.
- `tests/test_decision_invoke.py`: E2E via `/invoke` (monkeypatch de fetch).
- `Makefile`: `test-decision` e `test-all` inclui o teste novo.

## Como testar
```bash
cd aurora-platform
python -m venv .venv && source .venv/bin/activate
make install
make test-decision
make test-all
```

Opcional (smoke):

```bash
PYTHONPATH=. uvicorn src.router.router_service:app --host 0.0.0.0 --port 8090 --workers 1 &
sleep 2
curl -sS -X POST "http://localhost:8090/invoke" \
  -H "Content-Type: application/json" \
  -d '{"capability_id":"decision.evaluate_case","payload":{"numero_processo":"0000000-00.0000.0.00.0000","top_k":5},"timeout_ms":3000}'
```
