name: CI Alerts

on:
  workflow_run:
    workflows: ["CI"]
    types:
      - completed

jobs:
  notify:
    runs-on: ubuntu-latest
    if: github.event.workflow_run.conclusion == 'failure'

    steps:
      # O STEP DO SLACK FOI REMOVIDO DESTA VERSÃƒO

      - name: Send Email Notification on Failure
        uses: dawidd6/action-send-mail@v3
        with:
          from: ${{ secrets.EMAIL_USER }}
          to: ${{ secrets.EMAIL_USER }}
          username: ${{ secrets.EMAIL_USER }}
          password: ${{ secrets.EMAIL_PASS }}
          subject: "ðŸš¨ [AURORA-CI] Falha no Workflow: ${{ github.event.workflow_run.name }}"
          body: |
            Ocorreu uma falha no workflow '${{ github.event.workflow_run.name }}'.
            Branch: ${{ github.event.workflow_run.head_branch }}
            Consulte os logs para mais detalhes: ${{ github.event.workflow_run.html_url }}
